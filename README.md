# iWai

Скрипт для обработки изображений с помощью [waifu2x-caffe](https://github.com/lltcggie/waifu2x-caffe/) в публикациях Adobe InDesign

[Скачать](https://github.com/vbatushev/iWai/releases/)

**Только для Windows**

Пример улучшения изображения с помощью waifu2x-caffe:

![Sample Image](/assets/image.png)


## Поставка скрипта

В поставке скрипта два скрипта в формате Adobe Extendscript: iWai_dlg.jsxbin и iWai_quiet.jsxbin.

iWai_dlg.jsxbin при запуске показывает диалог, в котором можно выбрать те или иные параметры обработки.

iWai_quiet.jsxbin запускается без диалогового окна и использует уже существующий config.json с настройками обработки. Если такой файл отсутствует, он создается с настройками по умолчанию.

[Скачать](https://github.com/vbatushev/iWai/releases/)


## Настройка скрипта

Настройки скрипта хранятся в файле config.json, лежащем в той же директории, что и скрипт.

Если файла настроек нет, он создается из значений по умолчанию, указанных в самом скрипте.

### Параметры файла config.json

1. waifu2x_path — путь к исполняемому файлу waifu2x-caffe-cui.exe. По умолчанию, считается, что файл лежит в папке \~/Documents/waifu2x-caffe (\~/Documents — это путь к папке Документы/Documents данного пользователя). Если Вы хотите указать собственный путь к файлу, необходимо указывать его а) в кавычках, б) либо в абсолютном формате (например, "/c/Work/waifu", либо предохраняя слэши, например, "C:\\\\Work\\\\waifu").
2. **min_ppi** — минимальное значение ppi. Целое число. По умолчанию, 50.
3. **max_ppi** — максимальное значение ppi. Целое число. По умолчанию, 200.
4. **need_ppi** — необходимое значение ppi. Целое число. По умолчанию, 300.
5. **mode** — режим преобразования. Их четыре: *noise_scale* (убрать шум и увеличить), *scale* (только увеличить), *noise* (убрать только шум), *auto_scale* (автоматически убрать шум и увеличить). Параметр изменяется в диалоге и записывается в config.js непосредственно перед началом выполнения обработки изображений.
6. **noise** — удаление шума. Четыре уровня. Параметр изменяется в диалоге и записывается в config.js непосредственно перед началом выполнения обработки изображений.
7. **profiles** — профиль (модель) обработки. Значением профиля обработки является название папки, хранящей профиль. Предполагается, что папки с профилями находятся в папке models внутри папки с waifu2x-caffe. Параметризменяется в диалоге и записывается в config.js непосредственно перед началом выполнения обработки изображений.
8. **block** — размер блока. Влияет на скорость обработки. Значения: 64, 100, 128, 240, 256, 384, 432, 480, 512. Параметр изменяется в диалоге и записывается в config.js непосредственно перед началом выполнения обработки изображений.
9. **processor** — определяет процессор при обработке. Возможны два значения: cpu — используется центральный процессор компьютера (по умолчанию), gpu — используется графический процессор (обработка быстрее, но может работать не на всех компьютерах).
10. **language** — язык интерфейса. Допустимы два значения: *en* (английский язык) и *ru* (русский язык, по умолчанию).